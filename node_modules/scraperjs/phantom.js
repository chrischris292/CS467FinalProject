var phantom = require('phantom'),
	request = require('request');
var url = 'http://www.fluid.ie/angular/calculate/';
phantom.create(function(ph) {
	ph.createPage(function(page) {
		page.set('onLoadStarted', function() {
			console.log("Loading started");
		});
		page.set('onLoadFinished', function(s) {
			console.log("Loading finished", s);
		});

		request.get(url, function(err, header, body) {
			//console.log(body);
			page.setContent(body, null, function(s) {
				console.log(s);
				page.evaluate(function() {
					return $('#disp_digits').text();
				}, function(res) {
					console.log(res);
				});
				/*setTimeout(function() {
					page.evaluate(function() {
						//return document.getElementById('first').innerText;
					}, function(r) {
						console.log(arguments);
					});
				}, 1000);*/
			});
		});
		/*page.open(url, function(status) {
			page.evaluate(function() {
				return $('#disp_digits').text();
			}, function(res) {
				console.log(res);
			});
		});*/
	});
});